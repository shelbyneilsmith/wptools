jQuery('html').removeClass('no-js').addClass('js');

(function($){

	/* Delay script till DOM is loaded */
	/* TODO: Find better (faster) way to do this? */
	$(document).on('ready', function(){

		var $w = $( window ),
		$b = $( 'body' ),
		$c = $( '#content' ),
		$state
		;

		var menuMobile = false;
		var mobileWidth = '720';

		var yb = {
			breakSetup: function( $breakwidth, $operator, $callback ) {
				var	w = $(window),
				$width = w.width();

				var operators = {
					'<' : function( a, b ) { return a < b ; },
					'>' : function( a, b ) { return a > b ; },
					'<=' : function( a, b ) { return a <= b ; },
					'>=' : function( a, b ) { return a >= b ; }
				};

				w.load(function() {
					if ( operators[ $operator ] ( $width, $breakwidth ) ) {
						$state = $callback.name;
						return $callback();
					}
				});

				w.resize(function() {
					$width = w.width();
					if ( operators[ $operator ] ( $width, $breakwidth ) ) {
						if ( $state !== $callback.name ) {
							$state = $callback.name;
							return $callback();
						}
					}
				});
			},
			init : function(){
				yb.breakSetup( mobileWidth, '<=', smallBreak );
				yb.breakSetup( mobileWidth, '>', largeBreak );
			}
		};

		yb.init();

		function showHideMainNav() {
			if ( $( 'body' ).hasClass( 'offscreen-nav' ) ) {
				$( 'body' ).toggleClass( 'nav-open' );

				return false;
			}
		}

		function mobileMenuInit() {
			if ( !menuMobile ) {
				var btnLoc, btnHref;
				var btnPosClass = 'right';

				$( '#main-nav-header' ).parent().addClass( 'main-nav-origin' );

				if ( $('body').hasClass( 'mobilenav-btn-pos-bottom-thumb-right' ) || $('body').hasClass( 'mobilenav-btn-pos-bottom-thumb-left' ) ) {
					btnLoc = 'body';
					if ( $('body').hasClass( 'mobilenav-btn-pos-bottom-thumb-left' ) ) {
						btnPosClass = 'left';
					}
					btnPosClass = 'thumb-btn ' + btnPosClass;
				} else {
					if ( $('body').hasClass( 'mobilenav-btn-pos-header-left' ) ) {
						btnPosClass = 'left';
					}
					btnLoc = '#site-masthead .container';
				}
				if ( $( 'body' ).hasClass( 'offscreen-nav' ) ) {
					btnHref = "#";
				} else {
					btnHref = "#footer";
				}
				$( '<a class="nav-btn ' + btnPosClass + '" href="' + btnHref + '">Menu</a>' ).prependTo( btnLoc );
				$( '<a class="close-btn" href="#">&#10060;</a>' ).prependTo( '#main-nav-header' );
				$( '.nav-btn, #main-nav-header .close-btn' ).click( showHideMainNav );
				$( '#wrapper' ).wrapInner('<div class="inner-wrap"></div>');
				$( '#main-nav-header' ).prependTo( '#wrapper' );

				menuMobile = true;
			}
		}
		function mobileMenuRemove() {
			if ( menuMobile ) {
				if ( $( 'body' ).hasClass( 'nav-open' ) ) {
					$( 'body' ).removeClass( 'nav-open' );
				}
				$( '#main-nav-header' ).appendTo( '.main-nav-origin' );
				$( '#main-nav-header' ).parent().removeClass( 'main-nav-origin' );
				$( '.nav-btn, #main-nav-header .close-btn' ).remove();
				$( '#wrapper .inner-wrap').contents().unwrap();
				menuMobile = false;
			}
		}
		function smallBreak() {
			if ( $( 'body' ).hasClass( 'mobile-menu' ) ) {
				mobileMenuInit();
			}
			if ( ( $( '#util-nav-header li' ).length > 0 ) && $( 'body' ).hasClass( 'util-nav-merge' ) ) {
				$( '#util-nav-header li' ).addClass( 'immigrant' ).appendTo( '#main-nav-header > ul' );
				$( '#util-nav-header' ).hide();
			}
		}
		function largeBreak() {
			if ( $( 'body' ).hasClass( 'mobile-menu' ) ) {
				mobileMenuRemove();
			}
			if ( ( $( '#util-nav-header li' ).length === 0 ) && $( 'body' ).hasClass( 'util-nav-merge' ) ) {
				$( '#main-nav-header li.immigrant' ).appendTo( '#util-nav-header ul' ).removeClass( 'immigrant' );
				$( '#util-nav-header' ).show();
			}
		}

	}); /* end document.on('ready') */

})( jQuery );
(function($){

})( jQuery );

jQuery(document).ready(function($){

	/* ------------------------------------------------------------------------ */
	/* Accordion */
	/* ------------------------------------------------------------------------ */

	$('.accordion').each(function(){
		var acc = $(this).attr("rel") * 2;
		$(this).find('.accordion-inner:nth-child(' + acc + ')').show();
		$(this).find('.accordion-inner:nth-child(' + acc + ')').prev().addClass("active");
	});

	$('.accordion .accordion-title').click(function() {
		if($(this).next().is(':hidden')) {
			$(this).parent().find('.accordion-title').removeClass('active').next().slideUp(200);
			$(this).toggleClass('active').next().slideDown(200);
		}
		return false;
	});

	/* ------------------------------------------------------------------------ */
	/* Tabs */
	/* ------------------------------------------------------------------------ */

	$('div.tabset').tabset();

	/* ------------------------------------------------------------------------ */
	/* Toggle */
	/* ------------------------------------------------------------------------ */

	if( $(".toggle .toggle-title").hasClass('active') ){
		$(".toggle .toggle-title.active").closest('.toggle').find('.toggle-inner').show();
	}

	$(".toggle .toggle-title").click(function(){
		if( $(this).hasClass('active') ){
			$(this).removeClass("active").closest('.toggle').find('.toggle-inner').slideUp(200);
		}
		else{
			$(this).addClass("active").closest('.toggle').find('.toggle-inner').slideDown(200);
		}
	});

/* EOF document.ready */
});

/* Tabset Function ---------------------------------- */
(function ($) {
	$.fn.tabset = function () {
		var $tabsets = $(this);
		$tabsets.each(function (i) {
			var $tabs = $('li.tab a', this);
			$tabs.click(function (e) {
				var $this = $(this);
				var panels = $.map($tabs, function (val, i) {
					return $(val).attr('href');
				});
				$(panels.join(',')).hide();
				$tabs.removeClass('selected');
				$this.addClass('selected').blur();
				$($this.attr('href')).show();
				e.preventDefault();
				return false;
			}).first().triggerHandler('click');
		});
	};
})(jQuery);

/* ------------------------------------------------------------------------ */
/* EOF */
/* ------------------------------------------------------------------------ */